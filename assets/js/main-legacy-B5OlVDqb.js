System.register(["./utils-legacy-BXMkungC.js"],function(t,e){"use strict";var a,i,o,n,r,s,c,l,d,g,h,p,m;return{setters:[t=>{a=t.p,i=t.g,o=t.d,n=t.t,r=t.s,s=t.E,c=t.a,l=t.c,d=t.b,g=t.e,h=t.i,p=t.f,m=t.h}],execute:function(){var t=document.createElement("style");t.textContent=':root{--primary-color: #6366f1;--primary-dark: #4f46e5;--secondary-color: #8b5cf6;--accent-color: #06b6d4;--success-color: #10b981;--warning-color: #f59e0b;--error-color: #ef4444;--background-color: #0f172a;--background-secondary: #1e293b;--background-tertiary: #334155;--text-color: #f8fafc;--text-secondary: #cbd5e1;--text-muted: #94a3b8;--border-color: #475569;--light-background: #ffffff;--light-background-secondary: #f8fafc;--light-text: #1e293b;--light-text-secondary: #475569;--light-border: #e2e8f0;--spacing-xs: .25rem;--spacing-sm: .5rem;--spacing-md: 1rem;--spacing-lg: 1.5rem;--spacing-xl: 2rem;--spacing-2xl: 3rem;--spacing-3xl: 4rem;--font-primary: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;--font-mono: "SF Mono", Monaco, "Cascadia Code", monospace;--font-size-xs: .75rem;--font-size-sm: .875rem;--font-size-base: 1rem;--font-size-lg: 1.125rem;--font-size-xl: 1.25rem;--font-size-2xl: 1.5rem;--font-size-3xl: 1.875rem;--font-size-4xl: 2.25rem;--font-size-5xl: 3rem;--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / .05);--shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--shadow-md: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--shadow-xl: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--transition-fast: .15s ease-out;--transition-base: .25s ease-out;--transition-slow: .35s ease-out;--radius-sm: .25rem;--radius: .375rem;--radius-md: .5rem;--radius-lg: .75rem;--radius-xl: 1rem;--radius-full: 9999px;--z-dropdown: 1000;--z-sticky: 1020;--z-fixed: 1030;--z-modal: 1040;--z-popover: 1050;--z-tooltip: 1060}[data-theme=light]{--background-color: var(--light-background);--background-secondary: var(--light-background-secondary);--background-tertiary: #e2e8f0;--text-color: var(--light-text);--text-secondary: var(--light-text-secondary);--text-muted: #64748b;--border-color: var(--light-border)}*,*:before,*:after{box-sizing:border-box}*{margin:0;padding:0}html{scroll-behavior:smooth}body{font-family:var(--font-primary);background-color:var(--background-color);color:var(--text-color);line-height:1.6;overflow-x:hidden;transition:background-color var(--transition-base),color var(--transition-base)}img,picture,video,canvas,svg{display:block;max-width:100%;height:auto}input,button,textarea,select{font:inherit}button{background:none;border:none;cursor:pointer}a{text-decoration:none;color:inherit}.container{max-width:1200px;margin:0 auto;padding:0 var(--spacing-lg)}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.progress-bar{position:fixed;top:0;left:0;width:0%;height:3px;background:linear-gradient(90deg,var(--primary-color),var(--secondary-color));z-index:var(--z-fixed);transition:width var(--transition-fast)}.navigation{position:fixed;top:0;left:0;right:0;background:rgba(15,23,42,.95);backdrop-filter:blur(12px);border-bottom:1px solid var(--border-color);z-index:var(--z-fixed);transition:all var(--transition-base)}[data-theme=light] .navigation{background:rgba(255,255,255,.95)}.nav-container{max-width:1200px;margin:0 auto;padding:0 var(--spacing-lg);display:flex;align-items:center;justify-content:space-between;height:70px}.nav-logo{display:flex;align-items:center;gap:var(--spacing-sm);font-weight:700;font-size:var(--font-size-xl);color:var(--primary-color)}.nav-menu{display:flex;align-items:center;gap:var(--spacing-xl)}.nav-link{font-weight:500;color:var(--text-secondary);transition:color var(--transition-fast);position:relative}.nav-link:hover,.nav-link.active{color:var(--primary-color)}.nav-link:after{content:"";position:absolute;bottom:-8px;left:0;width:0;height:2px;background:var(--primary-color);transition:width var(--transition-fast)}.nav-link:hover:after,.nav-link.active:after{width:100%}.nav-controls{display:flex;align-items:center;gap:var(--spacing-md)}.theme-toggle,.lang-toggle{width:40px;height:40px;border-radius:var(--radius-full);background:var(--background-secondary);border:1px solid var(--border-color);display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast)}.theme-toggle:hover,.lang-toggle:hover{background:var(--background-tertiary);transform:scale(1.05)}.nav-toggle{display:none;flex-direction:column;gap:4px;width:30px;height:30px;justify-content:center;align-items:center}.nav-toggle span{width:20px;height:2px;background:var(--text-color);transition:all var(--transition-base)}@media (max-width: 768px){.nav-menu{position:fixed;top:70px;left:0;right:0;background:var(--background-color);flex-direction:column;padding:var(--spacing-xl);gap:var(--spacing-lg);border-bottom:1px solid var(--border-color);transform:translateY(-100%);opacity:0;transition:all var(--transition-base)}.nav-menu.active{transform:translateY(0);opacity:1}.nav-toggle{display:flex}.nav-toggle.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px)}.nav-toggle.active span:nth-child(2){opacity:0}.nav-toggle.active span:nth-child(3){transform:rotate(-45deg) translate(7px,-6px)}}.hero-section{min-height:100vh;display:flex;align-items:center;justify-content:center;position:relative;background:linear-gradient(135deg,var(--background-color) 0%,var(--background-secondary) 100%);overflow:hidden}.hero-background{position:absolute;top:0;left:0;width:100%;height:100%;background:url(\'data:image/svg+xml,<svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><g fill="%236366f1" fill-opacity="0.05"><circle cx="20" cy="20" r="1"/></g></svg>\');opacity:.5;animation:float 20s ease-in-out infinite}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}.hero-content{text-align:center;max-width:800px;padding:var(--spacing-xl);z-index:2}.hero-title{font-size:clamp(var(--font-size-3xl),5vw,var(--font-size-5xl));font-weight:800;margin-bottom:var(--spacing-lg);background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1.2}.hero-subtitle{font-size:var(--font-size-xl);color:var(--text-secondary);margin-bottom:var(--spacing-2xl)}.hero-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:var(--spacing-xl);margin-bottom:var(--spacing-2xl)}.stat-item{text-align:center}.stat-number{display:block;font-size:var(--font-size-3xl);font-weight:700;color:var(--primary-color);margin-bottom:var(--spacing-xs)}.stat-label{font-size:var(--font-size-sm);color:var(--text-muted)}.cta-button{display:inline-flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-xl);background:linear-gradient(135deg,var(--primary-color),var(--primary-dark));color:#fff;border-radius:var(--radius-full);font-weight:600;font-size:var(--font-size-lg);box-shadow:var(--shadow-lg);transition:all var(--transition-base);border:none;cursor:pointer}.cta-button:hover{transform:translateY(-2px);box-shadow:var(--shadow-xl)}.cta-button:active{transform:translateY(0)}.section-title{font-size:var(--font-size-3xl);font-weight:700;text-align:center;margin-bottom:var(--spacing-3xl);background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.about-section{padding:var(--spacing-3xl) 0;background:var(--background-secondary)}.about-content{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-3xl);align-items:center}.about-text{font-size:var(--font-size-lg);color:var(--text-secondary)}.about-text p{margin-bottom:var(--spacing-lg)}.about-features{display:grid;gap:var(--spacing-xl)}.feature-item{display:flex;align-items:flex-start;gap:var(--spacing-md);padding:var(--spacing-lg);background:var(--background-color);border-radius:var(--radius-lg);border:1px solid var(--border-color);transition:all var(--transition-base)}.feature-item:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg);border-color:var(--primary-color)}.feature-icon{font-size:var(--font-size-2xl);flex-shrink:0}.feature-item h3{font-size:var(--font-size-lg);font-weight:600;margin-bottom:var(--spacing-sm);color:var(--primary-color)}.feature-item p{color:var(--text-secondary);font-size:var(--font-size-sm)}@media (max-width: 768px){.about-content{grid-template-columns:1fr}}.services-section{padding:var(--spacing-3xl) 0}.services-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--spacing-xl)}.service-card{background:var(--background-secondary);padding:var(--spacing-2xl);border-radius:var(--radius-xl);border:1px solid var(--border-color);text-align:center;transition:all var(--transition-base);position:relative;overflow:hidden}.service-card:before{content:"";position:absolute;top:0;left:0;width:100%;height:2px;background:linear-gradient(90deg,var(--primary-color),var(--secondary-color));transform:scaleX(0);transition:transform var(--transition-base)}.service-card:hover:before{transform:scaleX(1)}.service-card:hover{transform:translateY(-8px);box-shadow:var(--shadow-xl)}.service-icon{font-size:var(--font-size-4xl);margin-bottom:var(--spacing-lg)}.service-card h3{font-size:var(--font-size-xl);font-weight:600;margin-bottom:var(--spacing-md);color:var(--primary-color)}.service-card p{color:var(--text-secondary);line-height:1.7}.contact-section{padding:var(--spacing-3xl) 0;background:var(--background-secondary)}.contact-content{text-align:center;max-width:600px;margin:0 auto}.contact-info p{font-size:var(--font-size-lg);color:var(--text-secondary);line-height:1.7}.chatbot-container{position:fixed;bottom:var(--spacing-lg);right:var(--spacing-lg);z-index:var(--z-modal)}.chatbot-toggle{width:60px;height:60px;border-radius:var(--radius-full);background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));color:#fff;box-shadow:var(--shadow-xl);display:flex;align-items:center;justify-content:center;transition:all var(--transition-base);border:none;cursor:pointer}.chatbot-toggle:hover{transform:scale(1.1)}.chatbot-icon{font-size:var(--font-size-xl)}.chatbot-window{position:absolute;bottom:80px;right:0;width:380px;height:500px;background:var(--background-color);border-radius:var(--radius-xl);border:1px solid var(--border-color);box-shadow:var(--shadow-xl);display:flex;flex-direction:column;transform:scale(.8) translateY(20px);opacity:0;pointer-events:none;transition:all var(--transition-base);overflow:hidden}.chatbot-window.active{transform:scale(1) translateY(0);opacity:1;pointer-events:all}.chatbot-header{padding:var(--spacing-lg);border-bottom:1px solid var(--border-color);display:flex;align-items:center;justify-content:space-between;background:var(--background-secondary)}.chatbot-header h3{font-size:var(--font-size-lg);font-weight:600;color:var(--primary-color)}.chatbot-close{width:30px;height:30px;border-radius:var(--radius-full);background:var(--background-tertiary);color:var(--text-color);display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast)}.chatbot-close:hover{background:var(--error-color);color:#fff}.chatbot-messages{flex:1;padding:var(--spacing-lg);overflow-y:auto;scrollbar-width:thin;scrollbar-color:var(--border-color) transparent}.chatbot-messages::-webkit-scrollbar{width:6px}.chatbot-messages::-webkit-scrollbar-track{background:transparent}.chatbot-messages::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:var(--radius-full)}.message{margin-bottom:var(--spacing-md);display:flex;flex-direction:column}.bot-message{align-items:flex-start}.user-message{align-items:flex-end}.message span{max-width:80%;padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--radius-lg);font-size:var(--font-size-sm);line-height:1.5}.bot-message span{background:var(--background-secondary);color:var(--text-color)}.user-message span{background:var(--primary-color);color:#fff}.chatbot-input{padding:var(--spacing-lg);border-top:1px solid var(--border-color);display:flex;gap:var(--spacing-sm);background:var(--background-secondary)}.chatbot-input input{flex:1;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--border-color);border-radius:var(--radius-full);background:var(--background-color);color:var(--text-color);font-size:var(--font-size-sm)}.chatbot-input input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(99,102,241,.1)}.chatbot-input button{width:36px;height:36px;border-radius:var(--radius-full);background:var(--primary-color);color:#fff;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast)}.chatbot-input button:hover{background:var(--primary-dark);transform:scale(1.05)}.footer{background:var(--background-secondary);border-top:1px solid var(--border-color);padding:var(--spacing-2xl) 0 var(--spacing-lg)}.footer-content{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--spacing-lg)}.footer-logo{display:flex;align-items:center;gap:var(--spacing-sm);font-weight:600;color:var(--primary-color)}.footer-links{display:flex;gap:var(--spacing-lg)}.footer-links a{color:var(--text-secondary);font-size:var(--font-size-sm);transition:color var(--transition-fast)}.footer-links a:hover{color:var(--primary-color)}.footer-bottom{text-align:center;padding-top:var(--spacing-lg);border-top:1px solid var(--border-color);color:var(--text-muted);font-size:var(--font-size-sm)}@media (max-width: 768px){.footer-content{flex-direction:column;gap:var(--spacing-lg);text-align:center}.chatbot-window{width:calc(100vw - 2rem);right:var(--spacing-md)}.chatbot-container{right:var(--spacing-md);bottom:var(--spacing-md)}}@keyframes slideInUp{0%{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes slideInLeft{0%{transform:translate(-50px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes slideInRight{0%{transform:translate(50px);opacity:0}to{transform:translate(0);opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.animate-on-scroll{opacity:0;transition:all .6s ease-out}.animate-on-scroll.animate{opacity:1}.animate-slide-up.animate{animation:slideInUp .6s ease-out forwards}.animate-slide-left.animate{animation:slideInLeft .6s ease-out forwards}.animate-slide-right.animate{animation:slideInRight .6s ease-out forwards}.animate-fade-in.animate{animation:fadeIn .6s ease-out forwards}.loading{animation:pulse 1.5s ease-in-out infinite}@media (prefers-reduced-motion: reduce){*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}}button:focus-visible,input:focus-visible,a:focus-visible{outline:2px solid var(--primary-color);outline-offset:2px}@media (prefers-contrast: high){:root{--border-color: #ffffff;--text-secondary: #ffffff}[data-theme=light]{--border-color: #000000;--text-secondary: #000000}}@media print{.navigation,.chatbot-container,.hero-background{display:none!important}body{background:#fff!important;color:#000!important}.hero-section{background:#fff!important}}\n/*$vite$:1*/',document.head.appendChild(t);const e={ja:{nav:{home:"ホーム",about:"概要",services:"サービス",contact:"お問い合わせ"},hero:{title:"AI・音楽・テクノロジーの融合",subtitle:"創造的技術で未来を形作る",cta:"今すぐ始める"},stats:{projects:"プロジェクト",clients:"クライアント",support:"サポート時間"},about:{title:"NEXUTHAについて",description1:"NEXUTHAは音楽、AI、自動化技術を融合させた革新的なソリューションを提供する創造的技術企業です。",description2:"プロンプトエンジニアリング、音楽制作、レーザーアートを通じて、クリエイターと技術の架け橋となります。"},features:{ai:{title:"AI技術",description:"最先端のAI技術を活用したソリューション"},music:{title:"音楽制作",description:"プロフェッショナルな音楽制作サービス"},automation:{title:"自動化",description:"効率的な業務自動化システム"}},services:{title:"サービス",prompt:{title:"プロンプトエンジニアリング",description:"AIモデルとの効果的なコミュニケーションを実現"},music:{title:"音楽制作",description:"オリジナル楽曲制作とサウンドデザイン"},laser:{title:"レーザーアート",description:"幻想的なレーザー映像と空間演出"}},contact:{title:"お問い合わせ",description:"プロジェクトのご相談やお見積もりは、AIアシスタントまでお気軽にお声がけください。"},chatbot:{title:"AIアシスタント",welcome:"こんにちは！NEXUTHAのAIアシスタントです。何かお手伝いできることはありますか？",placeholder:"メッセージを入力...",thinking:"考え中...",error:"申し訳ありません。エラーが発生しました。もう一度お試しください。"},footer:{privacy:"プライバシーポリシー",terms:"利用規約",rights:"All rights reserved."}},en:{nav:{home:"Home",about:"About",services:"Services",contact:"Contact"},hero:{title:"Fusion of AI, Music & Technology",subtitle:"Shaping the future with creative technology",cta:"Get Started"},stats:{projects:"Projects",clients:"Clients",support:"Support Hours"},about:{title:"About NEXUTHA",description1:"NEXUTHA is a creative technology company that provides innovative solutions by fusing music, AI, and automation technologies.",description2:"We serve as a bridge between creators and technology through prompt engineering, music production, and laser art."},features:{ai:{title:"AI Technology",description:"Solutions utilizing cutting-edge AI technology"},music:{title:"Music Production",description:"Professional music production services"},automation:{title:"Automation",description:"Efficient business automation systems"}},services:{title:"Services",prompt:{title:"Prompt Engineering",description:"Enabling effective communication with AI models"},music:{title:"Music Production",description:"Original music composition and sound design"},laser:{title:"Laser Art",description:"Fantastic laser visuals and spatial production"}},contact:{title:"Contact",description:"For project consultation or estimates, please feel free to contact our AI assistant."},chatbot:{title:"AI Assistant",welcome:"Hello! I'm NEXUTHA's AI assistant. How can I help you today?",placeholder:"Type your message...",thinking:"Thinking...",error:"Sorry, an error occurred. Please try again."},footer:{privacy:"Privacy Policy",terms:"Terms of Service",rights:"All rights reserved."}}},u={version:"2.0.0",environment:"production",api:{baseUrl:{}.API_BASE_URL||"https://api.nexutha.com",timeout:1e4},features:{analytics:!0,chatbot:!0,serviceWorker:!0,animations:!a()},performance:{enableLazyLoading:!0,enableImageOptimization:!0,enableCodeSplitting:!0},seo:{enableStructuredData:!0,enableMetaGeneration:!0,enableSitemap:!0}};class v extends s{constructor(){super(),this.state={language:c(),theme:r.get("nexutha_theme","dark"),navigation:{activeSection:"home",isMenuOpen:!1},chatbot:{isOpen:!1,messages:[],isTyping:!1,conversationHistory:[]},isLoading:!0,visitorCount:0},this.elements={},this.observers=[],this.statItems=[],this.init()}async init(){try{performance.mark("app-init-start"),this.initializeElements(),this.setupEventListeners(),await this.initializeFeatures(),this.applyInitialState(),this.setupIntersectionObservers(),this.initializeAnalytics(),this.setState({isLoading:!1}),performance.mark("app-init-end");const t=performance.measure("app-init-duration","app-init-start","app-init-end");this.emit("app:ready",{duration:t})}catch(t){this.handleError(t,"App initialization failed")}}initializeElements(){["loadingScreen","progressBar","navigation","navMenu","navToggle","themeToggle","langToggle","heroBackground","heroStats","ctaButton","chatbotContainer","chatbotToggle","chatbotWindow","chatbotMessages","chatbotInput","chatbotSend","chatbotClose"].forEach(t=>{this.elements[t]=document.getElementById(t)}),["navigation","themeToggle","langToggle"].forEach(t=>{if(!this.elements[t])throw new Error(`Critical element '${t}' not found`)})}setupEventListeners(){this.elements.navToggle?.addEventListener("click",()=>{this.toggleNavigation()}),this.elements.themeToggle?.addEventListener("click",()=>{this.toggleTheme()}),this.elements.langToggle?.addEventListener("click",()=>{this.toggleLanguage()}),document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const a=t.getAttribute("href")?.substring(1)||"home";this.navigateToSection(a)})}),this.elements.ctaButton?.addEventListener("click",()=>{this.openChatbot()}),this.elements.chatbotToggle?.addEventListener("click",()=>{this.toggleChatbot()}),this.elements.chatbotClose?.addEventListener("click",()=>{this.closeChatbot()}),this.elements.chatbotSend?.addEventListener("click",()=>{this.sendMessage()}),this.elements.chatbotInput?.addEventListener("keypress",t=>{"Enter"===t.key&&this.sendMessage()});const t=n(this.handleScroll.bind(this),16);window.addEventListener("scroll",t);const e=o(this.handleResize.bind(this),250);window.addEventListener("resize",e),document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),window.addEventListener("error",this.handleWindowError.bind(this)),window.addEventListener("unhandledrejection",this.handleUnhandledRejection.bind(this))}async initializeFeatures(){const t=[];u.features.chatbot&&t.push(this.initializeChatbot()),u.features.serviceWorker&&"serviceWorker"in navigator&&t.push(this.initializeServiceWorker()),u.features.animations&&t.push(this.initializeAnimations()),await Promise.all(t)}applyInitialState(){this.applyTheme(this.state.theme),this.applyLanguage(this.state.language),setTimeout(()=>{const t=this.elements.loadingScreen;t&&(t.classList.add("hide"),setTimeout(()=>{t.style.display="none"},300))},1e3),this.initializeStatsCounter()}setupIntersectionObservers(){const t=l(t=>{t.forEach(t=>{if(t.isIntersecting){const e=t.target.id;this.setActiveSection(e)}})},{threshold:.5});if(document.querySelectorAll("section[id]").forEach(e=>{t.observe(e)}),this.observers.push(t),u.features.animations){const t=l(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate"),t.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".animate-on-scroll").forEach(e=>{t.observe(e)}),this.observers.push(t)}}initializeAnalytics(){if(!u.features.analytics)return;const t=window.gtag;t&&(t("config","GA_TRACKING_ID",{page_title:document.title,page_location:window.location.href,custom_map:{custom_dimension_1:"device_type",custom_dimension_2:"language"}}),t("event","page_view",{device_type:d(),language:this.state.language}));const e=r.get("nexutha_visitor_count",0);r.set("nexutha_visitor_count",e+1),this.setState({visitorCount:e+1})}async initializeChatbot(){const t={id:i("msg_"),content:e[this.state.language].chatbot.welcome,role:"assistant",timestamp:new Date};this.setState({chatbot:{...this.state.chatbot,messages:[t]}}),this.updateChatbotUI()}async initializeServiceWorker(){try{await navigator.serviceWorker.register("/sw.js")}catch(t){}}async initializeAnimations(){this.initializeParticleBackground(),this.initializeScrollAnimations()}initializeStatsCounter(){document.querySelectorAll(".stat-number[data-count]").forEach(t=>{const e=parseInt(t.dataset.count||"0"),a={element:t,target:e,current:0,increment:e/100};this.statItems.push(a)})}startStatsAnimation(){this.statItems.forEach(t=>{g(t.element,t.target,2e3)})}initializeParticleBackground(){const t=this.elements.heroBackground;if(!t)return;const e=document.createElement("canvas"),a=e.getContext("2d");if(!a)return;e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="none",e.style.opacity="0.6",t.appendChild(e);const i=[],n=()=>{e.width=t.offsetWidth,e.height=t.offsetHeight},r=()=>({x:Math.random()*e.width,y:Math.random()*e.height,vx:.5*(Math.random()-.5),vy:.5*(Math.random()-.5),size:2*Math.random()+1,opacity:.5*Math.random()+.2}),s=()=>{a.clearRect(0,0,e.width,e.height),i.forEach(t=>{t.x+=t.vx,t.y+=t.vy,t.x<0&&(t.x=e.width),t.x>e.width&&(t.x=0),t.y<0&&(t.y=e.height),t.y>e.height&&(t.y=0),a.beginPath(),a.arc(t.x,t.y,t.size,0,2*Math.PI),a.fillStyle=`rgba(99, 102, 241, ${t.opacity})`,a.fill()}),i.forEach((t,e)=>{i.slice(e+1).forEach(e=>{const i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));i<100&&(a.beginPath(),a.moveTo(t.x,t.y),a.lineTo(e.x,e.y),a.strokeStyle=`rgba(99, 102, 241, ${.1*(1-i/100)})`,a.lineWidth=1,a.stroke())})}),document.hidden||requestAnimationFrame(s)};for(let o=0;o<50;o++)i.push(r());n(),s(),window.addEventListener("resize",o(n,250))}initializeScrollAnimations(){const t=n(()=>{const t=this.elements.progressBar;if(!t)return;const e=(window.pageYOffset||document.documentElement.scrollTop)/(document.documentElement.scrollHeight-window.innerHeight)*100;t.style.width=`${Math.min(e,100)}%`},16);window.addEventListener("scroll",t)}handleScroll(){const t=this.elements.navigation;if(t){const e=Math.min(window.pageYOffset/100,1);t.style.background=`rgba(15, 23, 42, ${.95*e})`}const e=this.elements.heroStats;e&&h(e)&&this.statItems.length>0&&0===this.statItems[0].current&&this.startStatsAnimation()}handleResize(){window.innerWidth>768&&this.state.navigation.isMenuOpen&&(this.setState({navigation:{...this.state.navigation,isMenuOpen:!1}}),this.updateNavigationUI())}handleKeyDown(t){"Escape"===t.key&&(this.state.chatbot.isOpen&&this.closeChatbot(),this.state.navigation.isMenuOpen&&this.toggleNavigation())}handleVisibilityChange(){}handleWindowError(t){this.handleError(new Error(t.message),"Window error",{filename:t.filename,lineno:t.lineno,colno:t.colno})}handleUnhandledRejection(t){this.handleError(t.reason,"Unhandled promise rejection")}handleError(t,e,a){p.log({timestamp:new Date,level:"error",message:`${e}: ${t.message}`,stack:t.stack,userAgent:navigator.userAgent,url:window.location.href,...a})}setState(t){this.state={...this.state,...t},this.emit("state:change",this.state)}toggleTheme(){const t="dark"===this.state.theme?"light":"dark";this.setState({theme:t}),this.applyTheme(t),r.set("nexutha_theme",t),this.emit("app:themeChange",{theme:t})}applyTheme(t){document.documentElement.setAttribute("data-theme",t);const e=this.elements.themeToggle;if(e){const a=e.querySelector(".theme-icon");a&&(a.textContent="dark"===t?"☀️":"🌙")}}toggleLanguage(){const t="ja"===this.state.language?"en":"ja";this.setState({language:t}),this.applyLanguage(t),r.set("nexutha_language",t),this.emit("app:languageChange",{language:t})}applyLanguage(t){const a=this.elements.langToggle;if(a){const e=a.querySelector(".lang-text");e&&(e.textContent="ja"===t?"EN":"JA")}if(document.querySelectorAll("[data-i18n]").forEach(a=>{const i=a.dataset.i18n;if(i){const o=this.getNestedTranslation(e[t],i);o&&(a.textContent=o)}}),document.querySelectorAll("[data-i18n-placeholder]").forEach(a=>{const i=a.dataset.i18nPlaceholder;if(i){const o=this.getNestedTranslation(e[t],i);o&&(a.placeholder=o)}}),document.documentElement.lang=t,this.state.chatbot.messages.length>0){const a=[...this.state.chatbot.messages];a[0]={...a[0],content:e[t].chatbot.welcome},this.setState({chatbot:{...this.state.chatbot,messages:a}}),this.updateChatbotUI()}}getNestedTranslation(t,e){return e.split(".").reduce((t,e)=>t&&t[e],t)}toggleNavigation(){const t=!this.state.navigation.isMenuOpen;this.setState({navigation:{...this.state.navigation,isMenuOpen:t}}),this.updateNavigationUI()}updateNavigationUI(){const t=this.elements.navMenu,e=this.elements.navToggle;t&&t.classList.toggle("active",this.state.navigation.isMenuOpen),e&&e.classList.toggle("active",this.state.navigation.isMenuOpen)}navigateToSection(t){const e=document.getElementById(t);e&&(m(e,70),this.setActiveSection(t),this.state.navigation.isMenuOpen&&(this.setState({navigation:{...this.state.navigation,isMenuOpen:!1}}),this.updateNavigationUI()))}setActiveSection(t){this.state.navigation.activeSection!==t&&(this.setState({navigation:{...this.state.navigation,activeSection:t}}),document.querySelectorAll(".nav-link").forEach(e=>{e.getAttribute("href")===`#${t}`?e.classList.add("active"):e.classList.remove("active")}),this.emit("navigation:sectionChange",{section:t}))}toggleChatbot(){const t=!this.state.chatbot.isOpen;this.setState({chatbot:{...this.state.chatbot,isOpen:t}}),this.updateChatbotUI()}openChatbot(){this.setState({chatbot:{...this.state.chatbot,isOpen:!0}}),this.updateChatbotUI()}closeChatbot(){this.setState({chatbot:{...this.state.chatbot,isOpen:!1}}),this.updateChatbotUI()}updateChatbotUI(){const t=this.elements.chatbotWindow;t&&t.classList.toggle("active",this.state.chatbot.isOpen),this.renderChatbotMessages(),this.state.chatbot.isOpen&&setTimeout(()=>{const t=this.elements.chatbotInput;t&&t.focus()},300)}renderChatbotMessages(){const t=this.elements.chatbotMessages;t&&(t.innerHTML="",this.state.chatbot.messages.forEach(e=>{const a=document.createElement("div");a.className=`message ${e.role}-message`;const i=document.createElement("span");i.textContent=e.content,a.appendChild(i),t.appendChild(a)}),t.scrollTop=t.scrollHeight)}async sendMessage(){const t=this.elements.chatbotInput;if(!t||!t.value.trim())return;const a={id:i("msg_"),content:t.value.trim(),role:"user",timestamp:new Date};this.setState({chatbot:{...this.state.chatbot,messages:[...this.state.chatbot.messages,a],isTyping:!0}}),t.value="",this.updateChatbotUI();try{const t=await this.generateAIResponse(a.content),e={id:i("msg_"),content:t,role:"assistant",timestamp:new Date};this.setState({chatbot:{...this.state.chatbot,messages:[...this.state.chatbot.messages,e],isTyping:!1,conversationHistory:[...this.state.chatbot.conversationHistory,a.content,t]}})}catch(o){const t={id:i("msg_"),content:e[this.state.language].chatbot.error,role:"assistant",timestamp:new Date};this.setState({chatbot:{...this.state.chatbot,messages:[...this.state.chatbot.messages,t],isTyping:!1}}),this.handleError(o,"Chatbot response failed")}this.updateChatbotUI(),this.emit("chatbot:messageReceived",{message:a})}async generateAIResponse(t){await new Promise(t=>setTimeout(t,1e3+2e3*Math.random()));const e=t.toLowerCase();return e.includes("hello")||e.includes("hi")||e.includes("こんにちは")?"ja"===this.state.language?"こんにちは！NEXUTHAのサービスについて何かご質問はありますか？":"Hello! Do you have any questions about NEXUTHA's services?":e.includes("service")||e.includes("サービス")?"ja"===this.state.language?"NEXUTHAは以下のサービスを提供しています：\n• プロンプトエンジニアリング\n• 音楽制作\n• レーザーアート\n• AI自動化システム\n\nどのサービスについて詳しく知りたいですか？":"NEXUTHA offers the following services:\n• Prompt Engineering\n• Music Production\n• Laser Art\n• AI Automation Systems\n\nWhich service would you like to know more about?":e.includes("price")||e.includes("cost")||e.includes("料金")||e.includes("価格")?"ja"===this.state.language?"料金はプロジェクトの規模と要件によって異なります。詳細なお見積もりをご希望でしたら、具体的なプロジェクト内容をお聞かせください。":"Pricing varies depending on project scope and requirements. For a detailed quote, please tell us about your specific project needs.":e.includes("contact")||e.includes("連絡")||e.includes("問い合わせ")?"ja"===this.state.language?"お問い合わせありがとうございます。プロジェクトの詳細を教えていただけますか？ご要望に合わせて最適なソリューションをご提案いたします。":"Thank you for your interest! Could you tell us more about your project details? We'll propose the best solution for your needs.":"ja"===this.state.language?"ご質問ありがとうございます。NEXUTHAはAI、音楽、テクノロジーを融合させた革新的なサービスを提供しています。具体的にどのようなことをお手伝いできるでしょうか？":"Thank you for your question! NEXUTHA provides innovative services that combine AI, music, and technology. How specifically can I help you today?"}getState(){return this.state}getConfig(){return u}destroy(){this.observers.forEach(t=>t.disconnect()),this.observers=[],this.removeAllListeners()}}let b=null;function f(){try{b=new v,window&&(window.NEXUTHAApp={instance:b,version:u.version,config:u,utils:{storage:r,throttle:n,debounce:o,generateId:i}})}catch(t){const e=document.createElement("div");e.style.cssText="\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background: #ef4444;\n      color: white;\n      padding: 2rem;\n      border-radius: 8px;\n      text-align: center;\n      z-index: 9999;\n      font-family: system-ui, sans-serif;\n    ",e.innerHTML='\n      <h2>Application Error</h2>\n      <p>Failed to initialize NEXUTHA. Please refresh the page.</p>\n      <button onclick="window.location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: white; color: #ef4444; border: none; border-radius: 4px; cursor: pointer;">\n        Refresh Page\n      </button>\n    ',document.body.appendChild(e)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f):f(),window.addEventListener("beforeunload",()=>{b&&b.destroy()})}}});
//# sourceMappingURL=main-legacy-B5OlVDqb.js.map
